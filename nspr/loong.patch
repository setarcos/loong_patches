diff --git a/PKGBUILD b/PKGBUILD
index f72c09f..586de37 100644
--- a/PKGBUILD
+++ b/PKGBUILD
@@ -17,15 +17,21 @@ makedepends=(
   mercurial
   zip
 )
+_revision=b563bfc16c887c48b038b7b441fcc4e40a126d3b
 source=(
-  "hg+https://hg.mozilla.org/projects/nspr#tag=NSPR_${pkgver//./_}_RTM"
+  "hg+https://hg.mozilla.org/projects/nspr#revision=$_revision"
   0001-linux-prefer-GCC-provided-atomics-to-asssembly-imple.patch
   0002-configure.in-Remove-assembly-files-from-build.patch
 )
-b2sums=('07fe5d0ad41d37080fb3114386490c5ff1d8f7fda406bae3c76118aff0c7007f4c3ebf94162c5c75bf6426a4c1bd0fcce2e3322b87eabfc26a652bc5e3d08dd0'
+b2sums=('SKIP'
         'fe81bbb23478958438e385ec5563842cdaf7400021def0d2f2184c0c38389e75f28ed7a4f3b52cada4d76c6318c104dda661f1d4efaa224bc832a989729ef852'
         '1fd6e9b1f3111a29a052b6034f796e4e9577a3dbb2d0e96798ce1f47b74f515c882c9f595198fa1646648611525b48857b33ed62e713991e2f28850690e99060')
 
+pkgver() {
+  cd nspr
+  hg id -t -r. | sed 's/^NSPR_//;s/_RTM$//;s/_/./g'
+}
+
 prepare() {
   cd nspr
 
