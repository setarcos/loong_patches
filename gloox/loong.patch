diff --git a/PKGBUILD b/PKGBUILD
index 8354dff..fe86d06 100644
--- a/PKGBUILD
+++ b/PKGBUILD
@@ -9,8 +9,15 @@ arch=(x86_64)
 url="https://camaya.net/gloox"
 license=("GPL")
 depends=('libidn' 'gnutls')
-source=(https://camaya.net/download/gloox-$pkgver.tar.bz2)
-sha256sums=('0b8b7371439bc58d9e51384b616c964b18b7b41b87af1b7855104380eda86ffb')
+source=(https://camaya.net/download/gloox-$pkgver.tar.bz2
+        gloox-fix-build.patch)
+sha256sums=('0b8b7371439bc58d9e51384b616c964b18b7b41b87af1b7855104380eda86ffb'
+            '4476111313494a51f6faca57c246ad7179c4eb4c40c7c47231e8a47f32309212')
+
+prepare() {
+  cd "$srcdir"/gloox-$pkgver
+  patch -p1 -i $srcdir/gloox-fix-build.patch
+}
 
 build() {
   cd "$srcdir"/gloox-$pkgver
