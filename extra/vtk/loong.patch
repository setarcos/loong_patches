diff --git a/PKGBUILD b/PKGBUILD
index a8eaee3..033410e 100644
--- a/PKGBUILD
+++ b/PKGBUILD
@@ -54,13 +54,12 @@ makedepends=(
   mariadb-libs
   netcdf
   opencascade
-  openimagedenoise
+#  openimagedenoise
   openmp
   openmpi
   openvdb
   openvr
   openxr
-  ospray
   pdal
   postgresql-libs
   proj
@@ -102,12 +101,12 @@ optdepends=(
   mariadb-libs
   netcdf
   opencascade
-  openimagedenoise
+#  openimagedenoise
   'openmpi: OpenMPI support'
   openvdb
   openvr
   openxr
-  ospray
+#  ospray
   pdal
   postgresql-libs
   proj
@@ -124,11 +123,13 @@ options=(staticlibs)
 source=(${url}/files/release/${pkgver%.*}/VTK-${pkgver}.tar.gz
         vtk-occt.patch
         https://gitlab.kitware.com/vtk/vtk/-/commit/5055371e.patch
-        ospray-3.patch)
+        ospray-3.patch
+	vtk-loong64.patch)
 sha256sums=('fdc7b9295225b34e4fdddc49cd06e66e94260cb00efee456e0f66568c9681be9'
             'df958eabc7dc4f5b33383ce0fb0f90a3ba202c1c2a24d3b5b9e7cfb1fb38b011'
             '54861a8667c505fedb96b49283521ce62af62148b629e953bbd065f831f02d04'
-            'faf3fd2eea2f73a07f5dcbd67920161a07ae554e008ad1e4099153fec2882278')
+            'faf3fd2eea2f73a07f5dcbd67920161a07ae554e008ad1e4099153fec2882278'
+            '9d0d77a25473c7c8832a333bf2436610c1b8714220296908b1b07891b21d90c5')
 
 prepare() {
   cd ${pkgname^^}-${pkgver}
@@ -137,6 +138,7 @@ prepare() {
   patch -Np1 -i "$srcdir"/vtk-occt.patch
   patch -Np1 -i ../5055371e.patch # Fix link to PDAL 2.6
   patch -Np1 -i ../ospray-3.patch # Fix build with ospray 3.0
+  patch -p1 -i ../vtk-loong64.patch
 }
 
 build() {
@@ -157,6 +159,7 @@ build() {
     -DVTK_INSTALL_TCL_DIR=/usr/lib/tcl${_tkver}/vtk/ \
     -DVTK_LEGACY_REMOVE=ON \
     -DVTK_SMP_ENABLE_OPENMP=ON \
+    -DVTK_ENABLE_OSPRAY=OFF \
     -DVTK_SMP_IMPLEMENTATION_TYPE=TBB \
     -DVTK_PYTHON_VERSION=3 \
     -DVTK_USE_MPI=ON \
@@ -164,7 +167,7 @@ build() {
     -DVTK_VERSIONED_INSTALL=OFF \
     -DVTK_WRAP_JAVA=ON \
     -DVTK_WRAP_PYTHON=ON \
-    -DVTKOSPRAY_ENABLE_DENOISER=ON \
+    -DVTKOSPRAY_ENABLE_DENOISER=OFF \
     -DVTKm_ENABLE_HDF5_IO=ON \
     -DVTKm_ENABLE_MPI=ON \
     -DVTKm_ENABLE_OPENMP=ON \
@@ -189,8 +192,8 @@ package() {
   install -dv "${pkgdir}"/usr/share/java/vtk
   mv -v "${pkgdir}"/usr/lib/java/vtk.jar "${pkgdir}"/usr/share/java/vtk
   # â€¦and the libs to the proper place
-  mv "${pkgdir}"/usr/lib/java/vtk-Linux-${CARCH}/*.so "${pkgdir}"/usr/lib/
-  rmdir "${pkgdir}"/usr/lib/java/{vtk-Linux-${CARCH}/,}
+  mv "${pkgdir}"/usr/lib/java/vtk-Linux-`uname -m`/*.so "${pkgdir}"/usr/lib/
+  rmdir "${pkgdir}"/usr/lib/java/{vtk-Linux-`uname -m`/,}
 
   # byte-compile python modules since the CMake build does not do it
   local site_packages=$(python -c "import site; print(site.getsitepackages()[0])")
