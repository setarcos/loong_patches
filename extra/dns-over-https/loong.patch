diff --git a/PKGBUILD b/PKGBUILD
index 068f67a..89d9e7d 100644
--- a/PKGBUILD
+++ b/PKGBUILD
@@ -25,10 +25,14 @@ prepare(){
 
 build() {
   cd "$pkgname-$pkgver"
-  export GOFLAGS="-buildmode=pie -trimpath"
+  export GOFLAGS="-trimpath"
   export CGO_LDFLAGS="${LDFLAGS}"
   export CGO_CFLAGS="${CFLAGS}"
   export CGO_CPPFLAGS="${CPPFLAGS}"
+  export GOPROXY=https://goproxy.cn
+  go mod edit -replace=golang.org/x/sys=github.com/golang/sys@v0.0.0-20220622161953-175b2fd9d664
+  go mod edit -replace=golang.org/x/net=github.com/golang/net@v0.0.0-20220622184535-263ec571b305
+  go mod tidy
   go build -v -o client ./doh-client
   go build -v -o server ./doh-server
 }
