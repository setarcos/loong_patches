diff --git a/PKGBUILD b/PKGBUILD
index 56fe76c..ef00928 100644
--- a/PKGBUILD
+++ b/PKGBUILD
@@ -19,6 +19,7 @@ license=(
 makedepends=(
   aarch64-linux-gnu-gcc
   arm-none-eabi-gcc
+  x86_64-linux-gnu-gcc
   acpica
   git
   util-linux-libs
@@ -29,6 +30,7 @@ makedepends=(
 options=(!makeflags)
 source=(
   git+$url#tag=$_commit
+  edk2-platforms::git+https://github.com/tianocore/edk2-platforms.git#tag=4e34823e9c954c67a7b5b81799549d493d1235fa
   $pkgbase-softfloat::git+https://github.com/ucb-bar/berkeley-softfloat-3.git
   https://www.openssl.org/source/openssl-$_openssl_ver.tar.gz{,.asc}
   https://github.com/google/brotli/archive/v$_brotli_ver/brotli-$_brotli_ver.tar.gz
@@ -44,6 +46,7 @@ source=(
   60-edk2-ovmf-microvm-4m.json
   60-edk2-aarch64.json
   60-edk2-arm.json
+  60-edk2-loongarch64.json
   70-edk2-ovmf-i386-csm.json
   70-edk2-ovmf-i386-csm-4m.json
   70-edk2-ovmf-x86_64-csm.json
@@ -55,8 +58,10 @@ source=(
   82-edk2-ovmf-ia32-on-x86_64-csm.json
   82-edk2-ovmf-ia32-on-x86_64-csm-4m.json
   $pkgbase-202202-brotli.patch
+  edk2-use-env-toolchains.patch
 )
 sha512sums=('SKIP'
+            'SKIP'
             'SKIP'
             '86c99146b37236419b110db77dd3ac3992e6bed78c258f0cc3434ca233460b4e17c0ac81d7058547fe9cb72a9fd80ee56d4b4916bb731dbe2bbcf1c3d46bf31a'
             'SKIP'
@@ -73,6 +78,7 @@ sha512sums=('SKIP'
             'b17d3ff5c9230c394ca4ee8229842c801b0cab3d88b546f2094dd0b42f2bc535f5bda3f9faee4b5418482185887648f906daaf0b7307c4c19747f5f0ab504f9a'
             '126822ef6198e87fb38014a5ba21969c9a163b41df3cdef6825317971ecc8df4a63099113e687634b88648acc93f24917d729e1c44295d2df7012288740307d3'
             'bbf663d539a985504d5fbc95552a2a60ac860a6bce4a62ecc551292d838b41cba3b5203f580a76a05e9f862ef98e7a3e5da39505c1f39d8ef48c08778fac584a'
+            '66a0d97f0cc8b4c2184f235ace4fd372efa2cfa175178a05b40053c5e4ef887487e11813d3ff7193c4554c8841166c73dc4f930cb6ae04cd28125e51631d0a69'
             'b5829aaf5ebae0073de26695eddbda61d117fbfb5e3c9f169fade31127ceb9bbc332af760bf6033d90a277d44c095fc30fe0d69defd81fb1aaf82cba0cf6fb90'
             '2e03935b57fabbbac4493ba6d54ac5b68abfd75775a56c95f5ba8c4627ba38260a3691a335e597c65096c50ce5038389efbb41ef5822a1ff49a8f312d8e37f75'
             '6e91029d451c9d43c1488ce0e252e6abc18fb1da48b6938d6ae3644fce58c97da6fff6addc60740b1b9ed5e6b86e9d7e94ee0dd55ea73833a82401b4c6f8c936'
@@ -83,8 +89,10 @@ sha512sums=('SKIP'
             'c9dbe7b2b6b8c18b7b8fdfef5bc329d9142c442f2f3dbae3ca4919255dcaf2ab576cd305648228d5dd48040ca3b14f44ee33b05cb6ca13b49e2836947b78ea53'
             '692e5bdefb61ae7b8d6e2063f163e2b68136b2522d606806766186f10c5fae1f7583fd83cda52c235d0d8eb0651e5a711f505021a8d8d949d8dccfce7f0c82ac'
             'c699ad500f24569643a4581f4bb5be0e4a90d160f0b3ae7728cf8e27b39665983b80439ca7b853b1bd9a174c8c123cbaf7ed3cd4a17d6460f4fec670c62a1183'
-            'd074c794796d17d77eed7c34201d93d7ef3f1322fe1ea4a2ddd7137fae884d49f94f465ee39cfd8346b026142668a41f5a8671e521409505dd6d002f71c0eebc')
+            'd074c794796d17d77eed7c34201d93d7ef3f1322fe1ea4a2ddd7137fae884d49f94f465ee39cfd8346b026142668a41f5a8671e521409505dd6d002f71c0eebc'
+            '94d889b4bc1dacf6ab4543b5e6ac7f99a5ec71f0362577df9e49f6ed0af4275455d8fb2f1ce8c279b7e4ce8a24cafa2006446f9fe793ab60680dcd328abf0429')
 b2sums=('SKIP'
+        'SKIP'
         'SKIP'
         'cc1df41fa12ba4443e15e94f6ebdc5e103b9dab5eab2e1c8f74e6a74fa2c38207817921b65d7293cb241c190a910191c7163600bb75243adde0e2f9ec31cc885'
         'SKIP'
@@ -101,6 +109,7 @@ b2sums=('SKIP'
         '01dbc4cad102535504eace2d9da225a481b62785d37365f1dea2d1210990ca6177485aa0134a074c09d253b539f12ae810706a77a46779ddb7dd4f1b9b934011'
         'f84ff505702e4b2a38b6fd23fbb732c25d3102a04bb6918b0cc3b3d7528a92626324199cea4ed91955aade98f308f1d1037255f26cc9ee21ace75fc6376e7df6'
         '04a7eb373d6ea1415d7cd6e8dea0d16b75cbb1fb88572a30b8ce9960dd0404adc7f25fce2ccfb103eb09405411dc4d4e0084236e4c814916d81e957dc6aedfd4'
+        'e273fb4d50a98e8dcbc6e439579508d03f38e64fc69e5671e9a01a0e6591b0241cedfe07f9fe9eaedca07c96a118c1ba7bf5556e51888826874c7e0386446cc2'
         'b4fcc2351b2d77b85cdce35180353aef06900af1554479853bf915d27a756d4bbed50a50e85b72e2e7f4868e6dec3b9c5b27f743d7c112e24e4e0c50cd103a33'
         '1783b83c6e39c99feb59043c3cff48b24bef55d43949cd9a3097dfbee73a6cf511c180d610a52de876ccea9833fec46d7a88ebce8114e54620b9988232fb9bcc'
         '1d76eda20067c1bb9928b0304244ab5770a9c4e1f401a74d51da31a47f3a5d6e1e64b5394768cdae6a5bc396b68b6a32eb1a407e1c6377461dd2d5f2f5a2538d'
@@ -111,13 +120,14 @@ b2sums=('SKIP'
         '0c1e145109de9a25339633b563e47f6c09ea314f636023d09a58559a499dd0bd283a45e050fc99fe34c4d712bd00a035064fa8406734d57029c67b9adb4b11ce'
         '0ad956e3e662909abafd0b9a2b7ef12e35a8832183cb41e17dcafaa4f5db1e47ef20b3040268644daebb24f66c18b99de07f41e7d62089691c07de688a08f05a'
         'a44b5ffc35d78925ac7362ec2cf75475d02e05ed0b9e8771c909d090187aaff7436e8d856d58b8a56827990006b813c63318b60a8a7780844c829a2b13a502cf'
-        '644c071dc4fbbccaa64b0b1babcad60395ffce1a7a317a6f5380eff44cbb886be5f29156a8e967ab02b508a33954fcf5602606b43362cc3bb1936a8cfc3a3c07')
+        '644c071dc4fbbccaa64b0b1babcad60395ffce1a7a317a6f5380eff44cbb886be5f29156a8e967ab02b508a33954fcf5602606b43362cc3bb1936a8cfc3a3c07'
+        '8c2e7b07d669e97388567f6a2d449a3f33fe98823d7a0807882b4a72f5d22c8e9e3141f0009abf2b398adb95562f8e281e6d53041e0c2ac36f178a320d5be55a')
 validpgpkeys=(
   8657ABB260F056B1E5190839D9C4D26D0E604491  # Matt Caswell <matt@openssl.org>
   7953AC1FBC3DC8B3B292393ED5E9E43F7DF9EE8C  # Richard Levitte <richard@levitte.org>
   A21FAB74B0088AA361152586B8EF1A6BA9DA2D5C  # Tomáš Mráz <tm@t8m.info>
 )
-_arch_list=(ARM AARCH64 IA32 X64)
+_arch_list=(ARM AARCH64 LOONGARCH64 IA32 X64)
 _build_type=RELEASE
 _build_plugin=GCC5
 
@@ -129,6 +139,7 @@ pkgver() {
 prepare() {
   # patch to be able to use brotli 1.0.9
   patch -Np1 -d $pkgbase -i ../$pkgbase-202202-brotli.patch
+  patch -Np1 -d $pkgbase -i ../edk2-use-env-toolchains.patch
 
   cd $pkgbase
 
@@ -157,6 +168,10 @@ prepare() {
 
   # copy seabios's CSM binary into place, so that it can be included in the binaries:
   cp -v /usr/share/qemu/bios-csm.bin OvmfPkg/Csm/Csm16/Csm16.bin
+  ln -sf $srcdir/edk2-platforms/Drivers .
+  ln -sf $srcdir/edk2-platforms/Features .
+  ln -sf $srcdir/edk2-platforms/Platform .
+  ln -sf $srcdir/edk2-platforms/Silicon .
 }
 
 # TODO: check TPM_ENABLE/TPM2_ENABLE
@@ -199,6 +214,8 @@ build() {
   ARCH=AARCH64 make -C BaseTools
   echo "Building base tools (ARM)"
   ARCH=ARM make -C BaseTools
+  echo "Building base tools (LOONGARCH64)"
+  ARCH=LOONGARCH64 make -C BaseTools
   echo "Building base tools"
   make -C BaseTools
   # expose build tooling in PATH
@@ -366,6 +383,24 @@ build() {
       dd if=Build/ArmVirtQemu-$_arch/${_build_type}_$_build_plugin/FV/QEMU_EFI.fd of=Build/ArmVirtQemu-$_arch/${_build_type}_$_build_plugin/FV/QEMU_CODE.fd conv=notrunc
       dd if=/dev/zero of=Build/ArmVirtQemu-$_arch/${_build_type}_$_build_plugin/FV/QEMU_VARS.fd bs=1M count=64
       ;;
+      LOONGARCH64)
+      echo "Building ovmf ($_arch) with secure boot"
+      local _build_options=(
+        -p Platform/Loongson/LoongArchQemuPkg/Loongson.dsc
+        -a "${_arch}"
+        "${_common_args[@]}"
+        "${_efi_args[@]}"
+        -D NETWORK_HTTP_BOOT_ENABLE
+        -D NETWORK_TLS_ENABLE
+        -D SECURE_BOOT_ENABLE
+        -D TPM_ENABLE
+        -D TPM_CONFIG_ENABLE
+      )
+      BaseTools/BinWrappers/PosixLike/build "${_build_options[@]}"
+      dd if=/dev/zero of=Build/LoongArchQemu/${_build_type}_${_build_plugin}/FV/QEMU_CODE.fd bs=1M count=4
+      dd if=Build/LoongArchQemu/${_build_type}_${_build_plugin}/FV/QEMU_EFI.fd of=Build/LoongArchQemu/${_build_type}_${_build_plugin}/FV/QEMU_CODE.fd conv=notrunc
+      dd if=/dev/zero of=Build/LoongArchQemu/${_build_type}_${_build_plugin}/FV/QEMU_VARS.fd bs=1M count=16
+      ;;
     esac
   done
 }
@@ -415,6 +450,21 @@ package_edk2-arm() {
   install -vDm 644 License.txt -t "$pkgdir/usr/share/licenses/$pkgname/"
 }
 
+package_edk2-loongarch64() {
+  local _arch=LOONGARCH64
+
+  pkgdesc="Firmware for Virtual Machines (loongarch64)"
+  url="https://github.com/tianocore/tianocore.github.io/wiki/LoongArchQemuPkg"
+
+  cd $pkgbase
+  install -vDm 644 Build/LoongArchQemu/${_build_type}_${_build_plugin}/FV/*.fd -t "$pkgdir/usr/share/$pkgbase/${_arch,,}/"
+  # install qemu descriptors in accordance with qemu:
+  # https://git.qemu.org/?p=qemu.git;a=tree;f=pc-bios/descriptors
+  install -vDm 644 ../*$pkgname*.json -t "$pkgdir/usr/share/qemu/firmware/"
+  # license
+  install -vDm 644 License.txt -t "$pkgdir/usr/share/licenses/$pkgname/"
+}
+
 package_edk2-shell() {
   local _arch
   # minimal UEFI shell, as defined in ShellPkg/Application/Shell/ShellPkg.inf
