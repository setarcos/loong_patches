diff --git a/PKGBUILD b/PKGBUILD
index acd2fbc..a2d924d 100644
--- a/PKGBUILD
+++ b/PKGBUILD
@@ -22,7 +22,7 @@ depends=('libwebp' 'python-ijson' 'python-jsonschema' 'python-twisted'
          'python-treq' 'python-idna' 'python-jinja' 'python-matrix-common'
          'python-bleach' 'python-typing_extensions' 'systemd')
 makedepends=(git python-build python-installer python-wheel python-poetry-core python-setuptools-rust)
-checkdepends=('python-pip' 'python-authlib' 'python-pyjwt' 'python-lxml' 'python-parameterized'
+makedepends+=('python-pip' 'python-authlib' 'python-pyjwt' 'python-lxml' 'python-parameterized'
               'python-txredisapi' 'python-hiredis' 'postgresql' 'python-pyicu')
 optdepends=('perl: sync_room_to_group.pl'
             'python-psycopg2: PostgreSQL support'
@@ -78,7 +78,7 @@ check() {
 	local python_version=$(python -c 'import sys; print("".join(map(str, sys.version_info[:2])))')
 	python -m venv --system-site-packages test-env
 	test-env/bin/python -m installer dist/*.whl
-	pushd build/lib.linux-$CARCH-cpython-${python_version}
+	pushd build/lib.linux-`uname -m`-cpython-${python_version}
 	ln -sv ../../tests .
 	PYTHONPATH="$PWD" PATH="../../test-env/bin:$PATH" ../../test-env/bin/python -m twisted.trial -j$(nproc) tests
 	rm -r tests _trial_temp
